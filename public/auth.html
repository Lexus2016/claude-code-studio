<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Claude Code Chat ‚Äî Auth</title>
<style>
:root{--bg:#0d1117;--s1:#161b22;--s2:#1c2129;--border:#30363d;--text:#e6edf3;--muted:#8b949e;--accent:#7c6aef;--accent2:#9d8df1;--red:#f85149;--green:#3fb950}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:var(--bg);color:var(--text);height:100vh;display:flex;align-items:center;justify-content:center}
.card{background:var(--s1);border:1px solid var(--border);border-radius:16px;padding:40px;width:400px;max-width:90vw;text-align:center}
.logo{width:56px;height:56px;border-radius:16px;background:linear-gradient(135deg,var(--accent),#a855f7);display:inline-flex;align-items:center;justify-content:center;font-size:24px;font-weight:700;color:white;margin-bottom:16px}
h1{font-size:20px;margin-bottom:4px}
.sub{color:var(--muted);font-size:13px;margin-bottom:24px}
.field{text-align:left;margin-bottom:14px}
.field label{display:block;font-size:12px;color:var(--muted);margin-bottom:4px;font-weight:500}
.field input{width:100%;background:var(--s2);border:1px solid var(--border);color:var(--text);padding:10px 14px;border-radius:8px;font-size:14px;outline:none;transition:border .15s}
.field input:focus{border-color:var(--accent)}
.btn{width:100%;padding:12px;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .15s;margin-top:8px}
.btn-primary{background:var(--accent);color:white}.btn-primary:hover{background:var(--accent2)}
.btn:disabled{opacity:.5;cursor:not-allowed}
.error{color:var(--red);font-size:12px;margin-top:8px;min-height:18px}
.note{color:var(--muted);font-size:11px;margin-top:16px;line-height:1.5}
</style>
</head>
<body>
<div class="card">
  <div class="logo">CC</div>
  <h1 id="title">Claude Code Chat</h1>
  <p class="sub" id="subtitle">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
  <form id="setupForm" style="display:none" onsubmit="return doSetup(event)">
    <div class="field"><label>–í–∞—à–µ —ñ–º'—è</label><input type="text" id="setupName" placeholder="Admin" autocomplete="name"></div>
    <div class="field"><label>–ü–∞—Ä–æ–ª—å (–º—ñ–Ω. 6 —Å–∏–º–≤–æ–ª—ñ–≤)</label><input type="password" id="setupPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6"></div>
    <div class="field"><label>–ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å</label><input type="password" id="setupPass2" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6"></div>
    <button type="submit" class="btn btn-primary" id="setupBtn">üöÄ –°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç</button>
    <div class="error" id="setupError"></div>
    <p class="note">–ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫. –ü–∞—Ä–æ–ª—å –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (bcrypt hash).</p>
  </form>
  <form id="loginForm" style="display:none" onsubmit="return doLogin(event)">
    <div class="field"><label>–ü–∞—Ä–æ–ª—å</label><input type="password" id="loginPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autofocus></div>
    <button type="submit" class="btn btn-primary" id="loginBtn">üîë –£–≤—ñ–π—Ç–∏</button>
    <div class="error" id="loginError"></div>
  </form>
</div>
<script>
async function checkStatus(){const r=await fetch('/api/auth/status');const d=await r.json();if(d.loggedIn){window.location.href='/';return}if(!d.setupDone){document.getElementById('title').textContent='–ü–µ—Ä—à–∏–π –∑–∞–ø—É—Å–∫';document.getElementById('subtitle').textContent='–°—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø—É';document.getElementById('setupForm').style.display='block'}else{document.getElementById('title').textContent='–í—Ö—ñ–¥';document.getElementById('subtitle').textContent='–í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å';document.getElementById('loginForm').style.display='block'}}
async function doSetup(e){e.preventDefault();const p=document.getElementById('setupPass').value,p2=document.getElementById('setupPass2').value,n=document.getElementById('setupName').value||'Admin',err=document.getElementById('setupError');if(p!==p2){err.textContent='–ü–∞—Ä–æ–ª—ñ –Ω–µ –∑–±—ñ–≥–∞—é—Ç—å—Å—è';return false}document.getElementById('setupBtn').disabled=true;try{const r=await fetch('/api/auth/setup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({password:p,displayName:n})});const d=await r.json();if(d.ok)window.location.href='/';else err.textContent=d.error||'–ü–æ–º–∏–ª–∫–∞'}catch(e){err.textContent='–ü–æ–º–∏–ª–∫–∞ –∑\'—î–¥–Ω–∞–Ω–Ω—è'}document.getElementById('setupBtn').disabled=false;return false}
async function doLogin(e){e.preventDefault();const p=document.getElementById('loginPass').value,err=document.getElementById('loginError');document.getElementById('loginBtn').disabled=true;try{const r=await fetch('/api/auth/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({password:p})});const d=await r.json();if(d.ok)window.location.href='/';else err.textContent=d.error==='Invalid password'?'–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å':d.error}catch(e){err.textContent='–ü–æ–º–∏–ª–∫–∞ –∑\'—î–¥–Ω–∞–Ω–Ω—è'}document.getElementById('loginBtn').disabled=false;return false}
checkStatus();
</script>
</body>
</html>
